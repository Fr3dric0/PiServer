extends layout
block styles
   link(href="/videojs/video-js.css", rel="stylesheet")
   link(href="/stylesheets/details.css", rel="stylesheet")
   link(href="/stylesheets/mediaplayer.css", rel="stylesheet")
   script(src="/videojs/videojs-ie8.js")
block header

block content
   div(class='cover-img-container')
      img(class="cover-img", src="/res/thumb/" + video.thumb.large)

      // IF videotype is tv-show include season and episode number
      - title = video.title
      if video.type == "tv-show"
         - title += " S"+video.season+" E"+conf.episode
      h2(class='sub-title')=title
      //p(class="details",style="margin-left: 10%; margin-right: 10%;")=video.details

   table(class='statistics')
      tr
         td( class='stat-clm', id='stat-genre',
         style='font-size: 0.7em; word-wrap: break-word; width: 40%;')
            if typeof video.genre != "undefined"
               strong=video.genre.join(", ")
         td( class='stat-clm', id='stat-rating',
         style='text-align: center')
            img(src='/images/imdb_flat.png', class='stat-rating-ico')
            em &nbsp #{video.rating}
         td( class='stat-clm',
         id='stat-viewcount',
         style='text-align: right; padding-left: 0; padding-right: 3%;')
            i(  class='glyphicon glyphicon-eye-open',
            style='font-size: 0.8em;')
            em &nbsp #{video.viewcount}
   p(class='details')=video.details



   - thumb = ""
   - vid_url = "/res/videos"

   if video.type == "tv-show"
      - vid_url += "/tv-shows/"+ video.vidID +"/season_"+ video.season +"/"+ video.episodes.current.url
      - thumb = video.episodes.current.thumb
   else if video.type == "movie"
      - thumb = video.thumb.small
      if(!video.vid_url)
         - vid_url += video.vidurl
      else
         - vid_url += video.vid_url


   video(id="my-video", class="video-js", controls, preload="auto", width="640", height="450", poster="/res/thumb"+thumb, data-setup="{}",
   style="width: 100%;")
      source(src=vid_url, type="video/mp4")
      p(class='vjs-no-js')
         To view this video please enable JavaScript, and consider upgrading to a web browser that
         a(target="_blank", href="http://videojs.com/html5-video-support/") supports HTML5 video

   if video.type == "tv-show"
      div(class="previews", style="position: relative; width: 100%; height: 150px;")
         if typeof video.episodes.prev != "undefined"
            div(class="preview-container gradient-bg-right", style="float: left; padding-right: 25px;")
               a(href="/videos/"+video.vidID+"/"+video.episodes.prev.season+"/"+video.episodes.prev.episode)
                  h3(style="float: right; margin-top: 40%;padding-left: 4%;") FÃ¸rre
                  img(src="/res/thumb"+thumb, style="height: 150px;")
         if typeof video.episodes.next != "undefined"
            div(class="preview-container gradient-bg-left", style="float: right; padding-left: 25px;")
               a(href="/videos/"+video.vidID+"/"+video.episodes.next.season+"/"+video.episodes.next.episode)
                  img(src="/res/thumb"+thumb, style="height: 150px;")
                  h3(style="float: left; margin-top: 40%;padding-right: 4%;") Neste

block scripts
   script(src="/videojs/video.js")